
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Pegon Converter - Final</title>
</head>
<body>
  <h1>Converter Pegon Khusus</h1>
  <p>Versi berdasarkan kaidah pribadi (user).</p>

  <textarea id="latinInput" rows="4" cols="50" placeholder="Tulis teks Latin di sini..."></textarea>
  <br>
  <button onclick="convert()">Konversi ke Pegon</button>

  <h2>Hasil Pegon:</h2>
  <div id="pegonOutput" style="font-size: 24px; direction: rtl;"></div>

  <script>
    const pegonMap = {
      ng: 'ڠ', ny: 'پ', sy: 'ش', kh: 'خ',
      a: 'ا', i: 'ي', u: 'و', e: 'ٓ', o: 'ؤ',
      b: 'ب', c: 'چ', d: 'د', f: 'ف', g: 'ڮ', h: 'ه',
      j: 'ج', k: 'ك', l: 'ل', m: 'م', n: 'ن',
      p: 'ف', q: 'ق', r: 'ر', s: 'س', t: 'ت',
      v: 'ف', w: 'و', x: 'خ', y: 'ي', z: 'ز'
    };

    const awalanVokal = {
      a: 'أ', i: 'إي', u: 'أو', o: 'أو', e: 'آ'
    };

    const arabOverride = {
  allah: 'الله',
  muhammad: 'محمد',
  islam: 'إسلام',
  iman: 'إيمان',
  ihsan: 'إحسان',
  amal: 'عمل',
  akhlak: 'أخلاق',
  ibadah: 'عبادة',
  sholat: 'صلاة',
  zakat: 'زكاة',
  haji: 'حج',
  umrah: 'عمرة',
  doa: 'دعاء',
  takdir: 'تقدير',
  syariat: 'شريعة',
  fiqih: 'فقه',
  ulama: 'علماء',
  hadis: 'حديث',
  nabi: 'نبي',
  rasul: 'رسول',
  wahyu: 'وحي',
  malaikat: 'ملائكة',
  jin: 'جن',
  surga: 'جنة',
  neraka: 'نار',
  tauhid: 'توحيد',
  kafir: 'كافر',
  munafik: 'منافق',
  syirik: 'شرك',
  azab: 'عذاب',
  rahmat: 'رحمة',
  masjid: 'مسجد',
  mihrab: 'محراب',
  mimbar: 'منبر',
  imam: 'إمام',
  khatib: 'خطيب',
  khutbah: 'خطبة',
  wudhu: 'وضوء',
  tayamum: 'تيمم',
  najis: 'نجس',
  halal: 'حلال',
  haram: 'حرام',
  fardhu: 'فرض',
  sunnah: 'سنة',
  makruh: 'مكروه',
  mubah: 'مباح',
  qadha: 'قضاء',
  qadar: 'قدر',
  hukum: 'حكم',
  adil: 'عادل',
  amanah: 'أمانة',
  fitnah: 'فتنة',
  sedekah: 'صدقة',
  infaq: 'إنفاق',
  qurban: 'قربان',
  ilmu: 'علم',
  akal: 'عقل',
  fikir: 'فكر',
  pelajar: 'طالب',
  madrasah: 'مدرسة',
  ustaz: 'أستاذ',
  kitab: 'كتاب',
  makna: 'معنى',
  tafsir: 'تفسير',
  huruf: 'حرف',
  kalam: 'كلام',
  naskah: 'نسخة',
  ukhuwah: 'أخوة',
  hidayah: 'هداية',
  maulid: 'مولد',
  isra: 'إسراء',
  miraj: 'معراج',
  khilafah: 'خلافة',
  jamaah: 'جماعة',
  takbir: 'تكبير',
  tahmid: 'تحميد',
  tahlil: 'تهليل',
  dzikir: 'ذكر',
  istighfar: 'استغفار',
  dinar: 'دينار',
  dirham: 'درهم',
  riba: 'ربا',
  syirkah: 'شركة',
  wakaf: 'وقف',
  rizki: 'رزق',
  muamalah: 'معاملة',
  akad: 'عقد',
  utang: 'دين',
  dunia: 'دنيا',
  akhirat: 'آخرة',
  alam: 'عالم',
  waktu: 'وقت',
  hikmah: 'حكمة',
  sabar: 'صبر',
  ikhlas: 'إخلاص',
  niat: 'نية',
  cinta: 'حب',
  dosa: 'ذنب',
  pahala: 'ثواب',
  adab: 'أدب',
  nafs: 'نفس',
  ruh: 'روح',
  qalb: 'قلب',
  lafadz: 'لفظ',
  taala: 'تعالى',
  saw: 'ﷺ',
  ialah: 'إيالاه',
  alhamdulillah: 'الحمد لله'
};


    function convertToPegon(teks) {
      let words = teks.split(/(\s+)/); // pisah spasi tetap
      let hasil = '';

      for (let kata of words) {
        let lower = kata.toLowerCase();
        if (arabOverride[lower]) {
          hasil += arabOverride[lower];
          continue;
        }

        if (lower.startsWith('di') && lower[2] && /[a-z]/.test(lower[2])) {
          hasil += 'دي ' + convertWord(lower.slice(2));
          continue;
        }

        hasil += convertWord(lower);
      }
      return hasil;
    }

    function convertWord(word) {
      let hasil = '';
      let i = 0;

      // Cek vokal di awal kata
      if (/^[aeiou]/.test(word)) {
        hasil += awalanVokal[word[0]] || word[0];
        i = 1;
      }

      while (i < word.length) {
        let dua = word.slice(i, i+2).toLowerCase();
        if (pegonMap[dua]) {
          hasil += pegonMap[dua];
          i += 2;
          continue;
        }
        let satu = word[i].toLowerCase();
        hasil += pegonMap[satu] || word[i];
        i++;
      }
      return hasil;
    }

    function convert() {
      let input = document.getElementById("latinInput").value;
      let output = convertToPegon(input);
      document.getElementById("pegonOutput").innerText = output;
    }
  </script>
</body>
</html>
