<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pegon Al-Kholiqy</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, #0f9d58, #0077b6);
      color: #333;
    }
    .scrollbar::-webkit-scrollbar {
      width: 8px;
    }
    .scrollbar::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 6px;
    }
  </style>
</head>
<body class="flex flex-col items-center min-h-screen py-10 px-4">

  <!-- HEADER -->
  <header class="text-center mb-6">
    <img src="logo.png" alt="Logo Pegon" class="mx-auto w-28 md:w-40 mb-2" />
    <h1 class="text-4xl md:text-5xl font-bold text-white">
      Peg<span class="text-lime-300">o</span>n Al khōlīy
    </h1>
    <p class="text-white text-sm md:text-base mt-1 opacity-80">
      Versi berdasarkan kaidah pribadi (user)
    </p>
  </header>

  <!-- MAIN BOX -->
  <main class="bg-white bg-opacity-90 rounded-3xl shadow-2xl w-full max-w-2xl">
    <!-- INPUT TEXT -->
    <div class="rounded-t-3xl bg-white py-2 px-4 border-b-2 border-gray-300">
      <h2 class="text-xl font-bold text-gray-800">Teks Latin</h2>
    </div>
    <textarea
      id="latinInput"
      rows="10"
      placeholder="Tulis teks Latin di sini..."
      class="w-full p-4 bg-[url('https://www.transparenttextures.com/patterns/arabesque.png')] bg-repeat rounded-none focus:outline-none resize-none scrollbar text-base"
    ></textarea>

    <!-- TOMBOL KONVERSI -->
    <div class="text-center my-4">
      <button onclick="convert()"
        class="bg-lime-500 hover:bg-lime-600 text-white font-bold py-3 px-8 rounded-full text-lg shadow-lg">
        Konversi ke teks pegon<br>
        <span class="text-sm font-normal opacity-70">Ctrl + Enter</span>
      </button>
    </div>

    <!-- OUTPUT BOX -->
    <div class="rounded-b-3xl bg-white py-2 px-4 border-t-2 border-gray-300">
      <h2 class="text-xl font-bold text-gray-700">Hasil Pegon</h2>
    </div>
    <div id="pegonOutput"
      class="text-2xl text-right p-4 leading-relaxed bg-gray-100 rounded-b-3xl"></div>
  </main>

  <!-- SCRIPT -->
  <script>
    const arabOverride = {
      orang: 'اورڠ',
      amal: 'عمل',
      baik: 'بائيك',
      // tambahkan lainnya sesuai kamus override
    };

    function convertWord(word) {
      return word; // logika dummy, ganti dengan yang asli
    }

    function convertToPegon(text) {
      let hasil = '';
      let words = text.split(/(\s+)/);
      for (let kata of words) {
        let lower = kata.toLowerCase();

        // Deteksi kata ulang
        const ulang = /^(\w+)-(\w+)$/.exec(lower);
        if (ulang) {
          const base = ulang[1];
          const ulang2 = ulang[2];
          if (base === ulang2 && arabOverride[base]) {
            hasil += arabOverride[base] + '-' + arabOverride[base];
            continue;
          }
        }

        if (arabOverride[lower]) {
          hasil += arabOverride[lower];
          continue;
        }

        hasil += convertWord(lower);
      }
      return hasil;
    }

    function convert() {
      const input = document.getElementById('latinInput').value;
      document.getElementById('pegonOutput').innerText = convertToPegon(input);
    }

    // Shortcut Ctrl + Enter
    document.addEventListener('keydown', function (event) {
      if (event.ctrlKey && event.key === 'Enter') {
        convert();
      }
    });
  </script>
</body>
</html>
