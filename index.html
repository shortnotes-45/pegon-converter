
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Pegon Converter - Custom</title>
</head>
<body>
  <h1>Converter Pegon Khusus</h1>
  <p>Versi berdasarkan kaidah pribadi (user).</p>

  <script>
    const rules = {
      vowels: {
        a: "ا",
        i: "ي",
        u: "و",
        e: "ىٓ",  // tapi biasanya diganti dengan huruf keriting (non-standard Unicode)
        o: "ؤ" // atau "أو" tergantung posisi
      },
      awalanVokal: {
        i: "إي",
        u: "أو",
        a: "أ",
        o: "أو",
        e: "آ"
      },
      konsonan: {
        ng: "ڠ",
        ny: "پ",
        g: "ڮ",
        kriting: "ٓ"  // tanda konsonan ber-harakat "e"
      },
      diftong: {
        ai: "ائي",
        au: "اؤ",
        oi: "ؤي",
        ui: "وي",
        ei: "ئى"
      },
      arabLafadz: [
        ["Allah", "الله"],
        ["Muhammad", "محمد"],
        ["Islam", "اسلام"],
        ["takbir", "تكبير"],
        ["zakat", "زكاة"],
        ["sholat", "صلاة"],
        ["nabi", "نبي"],
        ["dzikir", "ذكر"],
        ["lafadz", "لفظ"]
      ],
      special: {
        ialah: "إيالاه",
        "di ": "دي "
      }
    };

    function convertToPegon(input) {
      // Terapkan konversi khusus "di "
      for (const key in rules.special) {
        input = input.replaceAll(new RegExp("\b" + key, "gi"), rules.special[key]);
      }

      // Terapkan lafadz Arab langsung
      for (const [latin, arab] of rules.arabLafadz) {
        input = input.replaceAll(new RegExp(latin, "gi"), arab);
      }

      // Tambahkan aturan diftong
      for (const diftong in rules.diftong) {
        input = input.replaceAll(new RegExp(diftong, "gi"), rules.diftong[diftong]);
      }

      // Terapkan aturan awalan vokal
      input = input.replace(/[aeiou]/gi, match => rules.awalanVokal[match.toLowerCase()] || match);

      // Gantikan "ng", "ny", dan "g"
      input = input.replace(/ng/gi, rules.konsonan.ng);
      input = input.replace(/ny/gi, rules.konsonan.ny);
      input = input.replace(/g(?!h)/gi, rules.konsonan.g); // hindari "gh" Arab

      return input;
    }

    // Tes sederhana
    console.log(convertToPegon("menggunakan ingin ialah untuk sambung sholat nabi ngaji nyanyi di kantor"));
  </script>
</body>
</html>
