
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Pegon Converter - Custom</title>
</head>
<body>
  <h1>Converter Pegon Khusus</h1>
  <p>Versi berdasarkan kaidah pribadi (user).</p>

  <textarea id="latinInput" rows="4" cols="50" placeholder="Tulis teks Latin di sini..."></textarea>
  <br>
  <button onclick="convert()">Konversi ke Pegon</button>

  <h2>Hasil Pegon:</h2>
  <div id="pegonOutput" style="font-size: 24px; direction: rtl;"></div>

  <script>
    const rules = {
      vowels: {
        a: "ا",
        i: "ي",
        u: "و",
        e: "ىٓ",
        o: "ؤ"
      },
      awalanVokal: {
        i: "إي",
        u: "أو",
        a: "أ",
        o: "أو",
        e: "آ"
      },
      konsonan: {
        ng: "ڠ",
        ny: "پ",
        g: "ڮ"
      },
      diftong: {
        ai: "ائي",
        au: "اؤ",
        oi: "ؤي",
        ui: "وي",
        ei: "ئى"
      },
      arabLafadz: [
        ["allah", "الله"],
        ["muhammad", "محمد"],
        ["islam", "اسلام"],
        ["takbir", "تكبير"],
        ["zakat", "زكاة"],
        ["sholat", "صلاة"],
        ["nabi", "نبي"],
        ["dzikir", "ذكر"],
        ["lafadz", "لفظ"],
        ["taala", "تعالى"],
        ["saw", "ﷺ"]
      ],
      special: {
        ialah: "إيالاه",
        "di ": "دي "
      }
    };

    function convertToPegon(input) {
      let result = input;

      for (const key in rules.special) {
        result = result.replaceAll(new RegExp("\b" + key, "gi"), rules.special[key]);
      }

      for (const [latin, arab] of rules.arabLafadz) {
        result = result.replaceAll(new RegExp(latin, "gi"), arab);
      }

      for (const d in rules.diftong) {
        result = result.replaceAll(new RegExp(d, "gi"), rules.diftong[d]);
      }

      result = result.replace(/\b[aeiou]/gi, match => rules.awalanVokal[match.toLowerCase()] || match);

      result = result.replace(/ng/g, rules.konsonan.ng);
      result = result.replace(/ny/g, rules.konsonan.ny);
      result = result.replace(/g(?!h)/g, rules.konsonan.g);

      result = result.replace(/a/g, rules.vowels.a);
      result = result.replace(/i/g, rules.vowels.i);
      result = result.replace(/u/g, rules.vowels.u);
      result = result.replace(/e/g, rules.vowels.e);
      result = result.replace(/o/g, rules.vowels.o);

      return result;
    }

    function convert() {
      const input = document.getElementById("latinInput").value;
      const output = convertToPegon(input);
      document.getElementById("pegonOutput").innerText = output;
    }
  </script>
</body>
</html>
